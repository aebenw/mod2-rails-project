
<style>
body{
    background:blue;
}
 #map{
	 height:600px;
     width:800px;
     float:right;
     margin-top: 26px;

 }
 #out{
	 height:300px;
	 width:300px;
 }

 #map-container{
    float:right;
 }


 img{
     height: 300px;
     width: 300px;
 }

 #floating-panel {
    
    top: 10px;
    left: 25%;
    z-index: 5;
    background-color: #fff;
    padding: 5px;
    border: 1px solid #999;
    text-align: center;
    font-family: 'Roboto','sans-serif';
    line-height: 30px;
    padding-left: 10px;
  }
  #floating-panel {
   
  }


</style>




<div id="map-container">
<div id="floating-panel">
      <button id="drop" onclick="drop()" class="btn btn-success">Drop Markers</button>
    </div>
<div id="map"></div>
<br>

<div id="out"></div><br><hr>
</div>



<% @places.each do |e| %>

   
    <div class="card" style="width:500px">
    <img src=<%= url_for(e.img_url) %> class="image-responsive">
    <div class="card-img-overlay">
      <h4 class="card-title"> <%= e.name %></h4>
      <p class="card-text">Ranking <%= e.average_ranking %></p>
      <a href="#" class="btn btn-primary">See Deatils</a>
      <input type="hidden" class="lat-div" value="<%= e.lat %>" >
      <input type="hidden" class="lng-div" value="<%= e.lng %>" >
      <input type="hidden" class="title" value="<%= e.name %>" >
      


    </div>
  </div>
  
    <% end %>
















<script>
var markers = [];
var map;

function initMap(){

    var options = {
        zoom:10,
        center: {lat:40.7012, lng:-73.9875},
        mapTypeId: 'hybrid'
    };


     map = new google.maps.Map(document.getElementById('map'), options);

    var bmarker = new google.maps.Marker({
        draggable: true,
        animation: google.maps.Animation.DROP,
        position: {lat:40.7010, lng:-73.9875},
        title: 'Your Location!',
        icon: {                             
        url: "http://maps.google.com/mapfiles/ms/icons/blue-dot.png"},
                                 
        map: map
       
    });

    addToArray();
 
   }
   
  
    
   


  

   for(var i = 0; i < markers.length; i++ ){
   addMarker(markers[i]);
   }

       function addMarker(coords){
           var arr = [];

           
       var marker = new google.maps.Marker({
                   position: coords,
                   map: map,
                   draggable: true,
                   animation: google.maps.Animation.DROP
               });


           }




      
   

   
   
   function toggleBounce() {
        if (bmarker.getAnimation() !== null) {
          bmarker.setAnimation(null);
        } else {
          bmarker.setAnimation(google.maps.Animation.BOUNCE);
        }
      }


    

        function drop() {
           
       
       
        for (var i = 0; i < markers.length; i++) {
          addMarkerWithTimeout(markers[i], i * 200);
        }
      }

      function addMarkerWithTimeout(position, timeout) {
        window.setTimeout(function() {
          markers.push(new google.maps.Marker({
            position: position,
            map: map,
            animation: google.maps.Animation.DROP
          }));
        }, timeout);
      }
        
      
      function addToArray(){
        var lats = document.getElementsByClassName('lat-div');
        var lngs = document.getElementsByClassName('lng-div');
       
        for(var i = 0; i < lats.length;i++){
            markers.push({lat: parseFloat(lats[i].value), lng: parseFloat(lngs[i].value)})
            }
        }



        function clearMarkers() {
            for (var i = 0; i < markers.length; i++) {
              markers[i].setMap(null);
            }
            markers = [];
          }

</script>



<script async defer
src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBPdhJ7Z6pwRpxtlHG4aYSf2T7XivLBpiY&callback=initMap">
</script>


